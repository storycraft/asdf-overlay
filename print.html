<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Asdf Overlay Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Asdf Overlay Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Welcome to Asdf Overlay.
Asdf Overlay provides an easy to use interface to draw on top of windows.
It is primarily targeting games, but it can be used on any programs using GPU.</p>
<ol>
<li>Automatic graphics backend detection</li>
<li>GPU accelerated shared overlay surface</li>
<li>Input passthrough control</li>
</ol>
<p><img src="introduction/example.png" alt="Example image" /></p>
<p>By reading the documentation you will learn how to</p>
<ol>
<li>Setup development environment and building the library</li>
<li>Position overlay surface in multiple way</li>
<li>Control input passthrough</li>
</ol>
<h2 id="supported-graphics-backend"><a class="header" href="#supported-graphics-backend">Supported graphics backend</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
OpenGL</li>
<li><input disabled="" type="checkbox" checked=""/>
DX9</li>
<li><input disabled="" type="checkbox"/>
DX10</li>
<li><input disabled="" type="checkbox" checked=""/>
DX11</li>
<li><input disabled="" type="checkbox" checked=""/>
DX12</li>
<li><input disabled="" type="checkbox" checked=""/>
Vulkan (via loading as vulkan layer)</li>
</ul>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>This project is dual licensed under MIT or Apache-2.0 License.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prerequirements"><a class="header" href="#prerequirements">Prerequirements</a></h1>
<p>To build Asdf Overlay, you need prerequirements.
Click each items below, follow the install instructions.</p>
<ul>
<li><a href="https://nodejs.org/en/download">Node.js</a></li>
<li><a href="https://visualstudio.microsoft.com/">Microsoft Visual C++ Compiler</a> for x86, x64 and ARM64</li>
<li><a href="https://www.rust-lang.org/tools/install">Rust</a></li>
<li><a href="https://git-scm.com/downloads">Git</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="workspace-setup"><a class="header" href="#workspace-setup">Workspace Setup</a></h1>
<p>To setup Asdf Overlay workspace, you will first need to clone the repository.</p>
<p>Following command can be used to clone Github repository.</p>
<pre><code class="language-bash">git clone https://github.com/storycraft/asdf-overlay
</code></pre>
<p>After cloning repository, change the current directory.</p>
<pre><code class="language-bash">cd asdf-overlay
</code></pre>
<p>Initialize and update submodules by using a command below.</p>
<pre><code class="language-bash">git submodule update --init --recursive
</code></pre>
<p>Finish by installing node dependencies.</p>
<pre><code class="language-bash">pnpm install
</code></pre>
<h2 id="building-project"><a class="header" href="#building-project">Building project</a></h2>
<p>Once you done set up workspace, you can build the project using following command.</p>
<pre><code class="language-bash">pnpm build
</code></pre>
<p>For more detail, see <a href="developer-guide/./pnpm/build.html">Pnpm Command - build</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="debugging"><a class="header" href="#debugging">Debugging</a></h1>
<p>By default, release build will not emit any logs due to performance overhead.
To debug overlay DLL, you need to build with debug profile.</p>
<p>To build overlay DLL with debug profile, following command can be used.</p>
<pre><code class="language-bash">pnpm build-dll
</code></pre>
<p>After building, replace overlay DLL.
Overlay DLL with debug profile will emit tracing to Debug Output Window.
Use external debug log viewer (ex: <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/debugview">DebugView</a>) to see debug output.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>Asdf Overlay is distributed as Rust crate and Node.js package.
Follow the relevant sections.</p>
<h2 id="nodejs-package"><a class="header" href="#nodejs-package">Node.js Package</a></h2>
<p>Following command can be used to install Node.js package</p>
<pre><code class="language-bash">npm add asdf-overlay-node
</code></pre>
<h2 id="rust-crate"><a class="header" href="#rust-crate">Rust crate</a></h2>
<p>Following command can be used to install Rust crate</p>
<pre><code class="language-bash">cargo add asdf-overlay-client
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concepts"><a class="header" href="#concepts">Concepts</a></h1>
<p>To expose consistent interface from the target process, the library introduces some concepts.
These concepts are important as they represents how Asdf Overlay hook and abstracts underlying rendering infrastructure.</p>
<h2 id="window"><a class="header" href="#window">Window</a></h2>
<p>Window represents a Win32 window with an HWND.
Each window can accept inputs and have one Swapchain.</p>
<h2 id="swapchain"><a class="header" href="#swapchain">Swapchain</a></h2>
<p>Swapchain represents collection of framebuffers associated to an window.
The actual implementation varies by GPU backends.</p>
<p>For each swapchain, Asdf Overlay accept any BGRA formatted Direct3D 11 shared texture to be set as overlay surface.
Provided Direct3D 11 texture is drew on top of actual framebuffer before presentation.</p>
<p>Overlay texture must be drew using same GPU with target swapchain as it uses shared texture to avoid expensive cpu copy.
If provided texture is rendered on other GPU, the rendering will fail and overlay will not be displayed.
This is not significant issue on desktop as most desktops have only one GPU.
However some laptops have integrated GPU and discrete one then it can be problem.</p>
<h2 id="input"><a class="header" href="#input">Input</a></h2>
<p>Input is mouse and keyboard inputs coming from window.
This also includes raw inputs coming from event loop associated to a window.</p>
<p>Asdf Overlay let you listen these inputs, intercept and block them so users can interact with overlay.
To prevent abuse, blocking is disabled when the user attempts to close the window.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
